---
title: "Lecture 2"
subtitle: "New variables and Plots"
author: "Psych 10 C"
institute: "University of California, Irvine"
date: "03/30/2022"
output:
  xaringan::moon_reader:
    self_contained: true
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r xaringan-extra, echo = FALSE}
xaringanExtra::use_tile_view()

xaringanExtra::use_fit_screen()

xaringanExtra::use_editable(expires = 1)

xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,         #<<
  mute_unhighlighted_code = TRUE  #<<
)

htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    error_text = "<i class=\"fa fa-times-circle\" style=\"color: #F94144\"></i>"
  ),
  rmarkdown::html_dependency_font_awesome()
)
```

```{r load-tidy, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(flipbookr)
knitr::opts_chunk$set(fig.width = 6, message = FALSE, 
                      warning = FALSE, comment = "", 
                      cache = F)
link <- "https://raw.githubusercontent.com/ManuelVU/psych-10c-data/main/example.csv"
memory <- read_csv(file = link)
```

## Recognition Memory

- The data that we will work on today comes from a recognition memory experiment.

--

- We asked participants to look at a list of 50 words that would be used on a 
later test.

--

- After 5 minutes have passed we showed each participant 100 words, one at a 
time, and asked them if the word on the screen was on the original list or not.

--

- After one hour, we did another test, again presenting participants one 
word at a time and asking them if the word was on the original list.

--

- We assigned each participant an ID number for the experiment and recorded
their age and the number of words that they correctly recognized as being part 
of the original list of 50 words on each test.

--

- We organized all these data in R and save it as a `.csv` that we want to
look at now.

--

- How should we start?

---

## Load data into R

- We can start by loading the data and looking at the first 6 rows to make sure 
that we have the correct one.

```{r load-data}
link <- "https://raw.githubusercontent.com/ManuelVU/psych-10c-data/main/example.csv"
memory <- read_csv(file = link)
```

```{r data-example, echo = FALSE}
DT::datatable(
  head(x = memory, n = 6),
  fillContainer = FALSE, options = list(pageLength = 6)
)
```

---

## Creating new variables

- Sometimes we want to work with some transformation of the variables
that we have on a data file. 

--

- For example, if we're interested in knowing how many of the words that were 
correctly recalled came from the first or second test. We can make a new 
variable, based on the old ones, that contains this information.

--

- This can make some plots easier to make!

---

## Creating a new variable

- We will create a new variable that generates a label "test-1" whenever the 
test time (time_test) was 300 seconds after the study phase, and "test-2" when 
the test time was 3600 seconds after:

--

```{r id-test, echo = TRUE}
# create new variable using pipes! %>% this takes the output 
# of the preceding line and uses it as input on the next one
memory <- memory %>% 
  mutate("test_id" = ifelse(test = time_test == 300, 
                            yes = "test_1", no = "test_2"))

# look at the first 4 rows of the data
head(x = memory, n = 4)
```

---

## Creating a new variable

- The **`mutate()`** function allows us to create new variables from the ones 
already available in the dataset. **`ifelse()`** is another function applied 
here to impose a condition to be considered when creating this new variable.

--

- How can we modify the code above to create a new variable that labels 
participants as "young" if they are older than 35 and "elderly" otherwise?

- You have 3 minutes.

--

- **ANS:**

.can-edit.key-likes[
- 
]

---

class: inverse, center, middle

# Plotting

## Histograms

---

## Histograms

- A histogram represents a count of the number of times that a value has 
appeared in our data.

--

- They are constructed by creating intervals and counting the number of 
data points that fall on each.

--

- We can look at an example using our **`age`** variable.

--
.pull-left[
```{r hist-age, fig.align = 'center', echo = FALSE, fig.height = 5.6}
ggplot(data = memory) +
  aes(x = age) +
  geom_histogram(position="identity", 
                 binwidth = 1) +
  xlab("Age") +
  ylab("Frequency") + 
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20))
```
]

.pull-right[
```{r hist-age2, fig.align = 'center', echo = FALSE, fig.height = 5.3}
ggplot(data = memory) +
  aes(x = age) +
  geom_histogram(position="identity", 
                 binwidth = 5) +
  xlab("Age") +
  ylab("Frequency") + 
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20))
```
]

---

```{r hist-code, include = FALSE}
ggplot(data = memory) + #BREAK
  aes(x = correct) + #BREAK
  aes(fill = test_id, color = test_id) + #BREAK
  geom_histogram(position="identity", 
                 binwidth = 1,  
                 alpha = 0.4) + #BREAK
  theme_classic() + #BREAK
  xlab("Number of correct recalls") + #BREAK
  ylab("Frequency") + #BREAK
  guides(fill = guide_legend("Test order"), color = "none") + #BREAK
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20))
```

`r chunk_reveal(chunk_name = "hist-code", title = "### Histogram of correct recalls")`

---

## Histograms

- One of the main problems with histograms is that their shape depends on our
choice of the width of the bars!

--

- A change on the shape can change our interpretation of the results so we need 
to be careful when making our choice.

--

- Histograms can be used for numeric variables.

---
class: inverse, center, middle

# Plotting

## Box-plots

---

## Box-plots

.pull-left[

1. Box: has 3 marks, the limits which represent the first and third quantile and 
the median or second quantile. (We will define quantiles on the next lecture)

1. Whiskers: represent the maximum (minimum) of our observations that are lower
(greater) than 1.5 times the distance between the first and third quantile.

1. Everything outside of those marks is considered as an outlier.
]

.pull-right[
```{r ex-bp, echo = FALSE, fig.align = 'center'}
ggplot(data = memory) + 
  aes(y = age) + 
  geom_boxplot(fill = "white") + 
  ylab("age") + #BREAK
  guides(fill = "none", color = "none") + #BREAK
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20))
```
]

--

- We can use the same data as before for an example

---

```{r bp-code, include = FALSE}
ggplot(data = memory) + #BREAK
  aes(y = correct) + #BREAK
  aes(x = test_id) + #BREAK
  aes(color = test_id) + #BREAK
  scale_color_brewer(palette="Dark2") +#BREAK
  geom_boxplot(fill = "white") + #BREAK
  xlab("Test order") + #BREAK
  ylab("Number of correct recalls") + #BREAK
  guides(fill = "none", color = "none") + #BREAK
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20))
```

`r chunk_reveal(chunk_name = "bp-code", title = "### Box plot correct responses")`

---

## Box plots

- Box plots show us how our data is dispersed, for example the number of 
correctly recalled words are closer together in the first test in comparison to 
the second.

--

- We can also see that the median number of correctly recalled words was higher 
on test one.

--

- This plot also allows us to evaluate if our data is dispersed symmetrically 
around the median value, or if there's some bias towards one of the ends.

--

- There are some variables that we would not expect to be symmetric (think about
reaction times in a game).


---
class: inverse, center, middle

# Plotting

## Scatter plots

---

## Scatter plots

- Histograms are useful when we have a single numeric variable.

--

- Box plots are very informative of the variability in our data.

--

- Scatter plots are useful when we want to see how two numerical variables 
"change" together.

---

```{r scatter-code, include = FALSE}
ggplot(data = memory) + #BREAK
  aes(y = correct) + #BREAK
  aes(x = age) + #BREAK
  aes(color = test_id) + #BREAK
  geom_point(fill = "white") + #BREAK
  xlab("Age") + #BREAK
  ylab("Number of correct recalls") + #BREAK
  guides(fill = "none", color = guide_legend("Test order")) + #BREAK
  theme(axis.title.x = element_text(size = 20),
        axis.title.y = element_text(size = 20)) +
  geom_smooth(method = lm)
```

`r chunk_reveal(chunk_name = "scatter-code", title = "### Scater plot correct responses vs age")`
